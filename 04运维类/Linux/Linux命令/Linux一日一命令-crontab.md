#<center>Linux一日一命令之crontab</center>

# 1. 名称（name)
  - 简写：`crontab`
  - 全名：`maintain crontab files for individual users`
  - 描述：为个人用户维护定时任务文件。

# 2. 用法（usage)
```
  crontab [-u user] file
  crontab [-u user] [-i] {-e | -l | -r}
```
# 3. 描述（description）
`crontab`是一个用于安装、卸载以及列出一个列表的程序，这个列表用来驱动`cron`守护进程  ，每个用户拥有自己的定时任务，这些定时任务文件保存在`/var/spool/cron/crontabs`, 但是这些文件并不建议直接修改。

如果文件`/etc/cron.allow`存在，则必须列出来所有可以使用crontab的用户（每一个用户占用一行），如果`/etc/cron.allow`文件不存在，但是存在文件`/etc/cron.deny`,则`cron.deny`文件必须列出所有不允许使用`crontab`命令的用户名，或者说必须不能将有权限制定定时任务的用户列在`cron.deny`文件中。

如果这两个文件都不存在，则根据（站点）系统的配置参数，确定是只有`root`用户有权限还是所有的用户都有使用定时任务的权限。

如果两个文件都存在的话，则`/etc/cron.allow`具有优先权，也就是说`/etc/cron.deny`文件将失效。

无论这两个文件是否存在，`root`用户都有权限使用定时任务。对于便准的debian系统，所有的用户都可以使用定时任务。

当`-u`选项出现时，将指定特定的用户的定时任务将被使用（列出定时任务）或者被修改（编辑），如果没有该选项，默认的是检查当前用户的定时任务，也就是执行该命令的用户的定时任务。但是当当前用户是`su`或者说`root`（超级管理员用户）时，可能会使定时任务便的混乱，因此当使用超级管理员执行该命令时，一定要加上`-u`选项。

第一个命令形式是用来从指定的文件中或者伪文件名`-`存在的标准输入中安装指定任务。

选项`-l`会在标准输出中列出当前定时任务，请注意debain的特殊性。

选项`-r`将会一处当前的定时任务。

选项`-e`，用系统变量`VISUAL`或者`EDITOR`指定的编辑器编辑当前的定时任务，当退出编辑的时候，当前的定时任务将被自动安装（无需重新启动定时任务），如果这两个命令都不存在，将使用默认的`/usr/lib/editor`编辑。

选项`-i`修改`-r`选项，在移除当前的定时任务的时候，提示`Y/N`。

# 3. 文件
  - `/etc/cron.allow`
  - `/etc/cron.deny`
  - `/var/spool/cron/crontabs`
每个用户的定时任务文件都存在`/var/spool/cron/crontabs`目录下，这些文件不允许用户直接编辑，一次来保证只有系统允许的用户才可以添加定时任务，而且保证只有语法正确的定时任务才能写在这个目录，这是强制只有crontab组才对这个目录有写的权限，并且这个特定的组配置定时任务的组id和bid等。
