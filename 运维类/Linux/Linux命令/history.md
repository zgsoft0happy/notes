Linux命令之 `history`

GNU的历史库

很多应用程序是按照行来读取用户输入的，GNU历史库能够记录跟踪这些输入的行，并能够将任何数据和这些行进行关联，并利用以前的信息来组合成新的行。

这个历史库支持类似于在bash中的命令历史扩展功能，本文将介绍具体的用法。

历史扩展能够快速的将历史列表中的单词引入到输入流中，使得执行重复命令变得方便，也使得在当前行为先前的命令插入参数，以及修改先前命令的错误变得容易。

历史扩展通常实在一行命令被读取后立即执行，它分为两个部分，首先是确定历史列表中那一行用来替换；然后是选择改行的部分（个人理解也可是全部）用于当前行。从历史列表中选择是事件，而选择的它的部分是单词。可以对这些单词进行各种修改，将其分解修改为和正常的在bash中输入的命令一样， 用引号括起来的几个单词可以看作是一个单词（参考下面history_tokenize()的描述）。历史扩展通过历史扩展字符来引入，`!`是默认的扩展字符，还有`/`和单引号是扩展字符。

事件代号：

- !n 使用编号为n的历史命令
- !-n 使用编号中倒数第n条命令
- !! 上一条命令，等同`!-1`
- !string 使用最近一条匹配string开头的命令
- !?string[?] 使用最近一条匹配string的命令（不一定是开头）
